{
  "$defs": {
    "CatchAllEntryPoint": {
      "description": "Entry point that catches all user messages",
      "properties": {
        "entrypoint_id": {
          "title": "Entrypoint Id",
          "type": "string"
        },
        "next_block_id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "title": "Next Block Id"
        }
      },
      "required": [
        "entrypoint_id",
        "next_block_id"
      ],
      "title": "CatchAllEntryPoint",
      "type": "object"
    },
    "CommandEntryPoint": {
      "description": "Basic entry-point catching Telegram /commands",
      "properties": {
        "entrypoint_id": {
          "title": "Entrypoint Id",
          "type": "string"
        },
        "command": {
          "title": "Command",
          "type": "string"
        },
        "next_block_id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "title": "Next Block Id"
        },
        "scope": {
          "allOf": [
            {
              "$ref": "#/$defs/CommandScope"
            }
          ],
          "default": "private"
        },
        "short_description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Short Description"
        }
      },
      "required": [
        "entrypoint_id",
        "command",
        "next_block_id",
        "scope",
        "short_description"
      ],
      "title": "CommandEntryPoint",
      "type": "object"
    },
    "CommandScope": {
      "enum": [
        "private",
        "group",
        "any"
      ],
      "title": "CommandScope",
      "type": "string"
    },
    "FeedbackHandlerConfig": {
      "properties": {
        "admin_chat_id": {
          "title": "Admin Chat Id",
          "type": "integer"
        },
        "forum_topic_per_user": {
          "title": "Forum Topic Per User",
          "type": "boolean"
        },
        "anonimyze_users": {
          "title": "Anonimyze Users",
          "type": "boolean"
        },
        "max_messages_per_minute": {
          "title": "Max Messages Per Minute",
          "type": "number"
        },
        "messages_to_user": {
          "$ref": "#/$defs/MessagesToUser"
        },
        "messages_to_admin": {
          "$ref": "#/$defs/MessagesToAdmin"
        },
        "hashtags_in_admin_chat": {
          "title": "Hashtags In Admin Chat",
          "type": "boolean"
        },
        "unanswered_hashtag": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "title": "Unanswered Hashtag"
        },
        "hashtag_message_rarer_than": {
          "anyOf": [
            {
              "format": "duration",
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "title": "Hashtag Message Rarer Than"
        },
        "message_log_to_admin_chat": {
          "title": "Message Log To Admin Chat",
          "type": "boolean"
        }
      },
      "required": [
        "admin_chat_id",
        "forum_topic_per_user",
        "anonimyze_users",
        "max_messages_per_minute",
        "messages_to_user",
        "messages_to_admin",
        "hashtags_in_admin_chat",
        "unanswered_hashtag",
        "hashtag_message_rarer_than",
        "message_log_to_admin_chat"
      ],
      "title": "FeedbackHandlerConfig",
      "type": "object"
    },
    "HumanOperatorBlock": {
      "description": "Terminal block that incapsulates user interaction with a human operator",
      "properties": {
        "block_id": {
          "title": "Block Id",
          "type": "string"
        },
        "catch_all": {
          "title": "Catch All",
          "type": "boolean"
        },
        "feedback_handler_config": {
          "$ref": "#/$defs/FeedbackHandlerConfig"
        }
      },
      "required": [
        "block_id",
        "catch_all",
        "feedback_handler_config"
      ],
      "title": "HumanOperatorBlock",
      "type": "object"
    },
    "Menu": {
      "properties": {
        "text": {
          "title": "Text",
          "type": "string"
        },
        "items": {
          "items": {
            "$ref": "#/$defs/MenuItem"
          },
          "title": "Items",
          "type": "array"
        }
      },
      "required": [
        "text",
        "items"
      ],
      "title": "Menu",
      "type": "object"
    },
    "MenuBlock": {
      "description": "Multilevel menu on inline buttons",
      "properties": {
        "block_id": {
          "title": "Block Id",
          "type": "string"
        },
        "menu": {
          "$ref": "#/$defs/Menu"
        },
        "config": {
          "$ref": "#/$defs/MenuConfig"
        }
      },
      "required": [
        "block_id",
        "menu",
        "config"
      ],
      "title": "MenuBlock",
      "type": "object"
    },
    "MenuConfig": {
      "properties": {
        "back_label": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "additionalProperties": {
                "type": "string"
              },
              "type": "object"
            }
          ],
          "title": "Back Label"
        },
        "lock_after_termination": {
          "title": "Lock After Termination",
          "type": "boolean"
        },
        "is_text_html": {
          "default": false,
          "title": "Is Text Html",
          "type": "boolean"
        }
      },
      "required": [
        "back_label",
        "lock_after_termination",
        "is_text_html"
      ],
      "title": "MenuConfig",
      "type": "object"
    },
    "MenuItem": {
      "properties": {
        "label": {
          "title": "Label",
          "type": "string"
        },
        "submenu": {
          "anyOf": [
            {
              "$ref": "#/$defs/Menu"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "next_block_id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Next Block Id"
        },
        "link_url": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Link Url"
        }
      },
      "required": [
        "label",
        "submenu",
        "next_block_id",
        "link_url"
      ],
      "title": "MenuItem",
      "type": "object"
    },
    "MessageBlock": {
      "description": "Simplest user flow block: send message and immediately continue to the next block",
      "properties": {
        "block_id": {
          "title": "Block Id",
          "type": "string"
        },
        "message_text": {
          "title": "Message Text",
          "type": "string"
        },
        "next_block_id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "title": "Next Block Id"
        }
      },
      "required": [
        "block_id",
        "message_text",
        "next_block_id"
      ],
      "title": "MessageBlock",
      "type": "object"
    },
    "MessagesToAdmin": {
      "properties": {
        "copied_to_user_ok": {
          "title": "Copied To User Ok",
          "type": "string"
        },
        "deleted_message_ok": {
          "title": "Deleted Message Ok",
          "type": "string"
        },
        "can_not_delete_message": {
          "title": "Can Not Delete Message",
          "type": "string"
        }
      },
      "required": [
        "copied_to_user_ok",
        "deleted_message_ok",
        "can_not_delete_message"
      ],
      "title": "MessagesToAdmin",
      "type": "object"
    },
    "MessagesToUser": {
      "properties": {
        "forwarded_to_admin_ok": {
          "title": "Forwarded To Admin Ok",
          "type": "string"
        },
        "throttling": {
          "title": "Throttling",
          "type": "string"
        }
      },
      "required": [
        "forwarded_to_admin_ok",
        "throttling"
      ],
      "title": "MessagesToUser",
      "type": "object"
    },
    "RegexMatchEntryPoint": {
      "description": "Entrypoint matching user messages by searching a regex pattern in text",
      "properties": {
        "entrypoint_id": {
          "title": "Entrypoint Id",
          "type": "string"
        },
        "regex": {
          "title": "Regex",
          "type": "string"
        },
        "next_block_id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "title": "Next Block Id"
        }
      },
      "required": [
        "entrypoint_id",
        "regex",
        "next_block_id"
      ],
      "title": "RegexMatchEntryPoint",
      "type": "object"
    },
    "UserFlowBlockConfig": {
      "properties": {
        "message": {
          "anyOf": [
            {
              "$ref": "#/$defs/MessageBlock"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "human_operator": {
          "anyOf": [
            {
              "$ref": "#/$defs/HumanOperatorBlock"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "menu": {
          "anyOf": [
            {
              "$ref": "#/$defs/MenuBlock"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "required": [
        "message",
        "human_operator",
        "menu"
      ],
      "title": "UserFlowBlockConfig",
      "type": "object"
    },
    "UserFlowConfig": {
      "properties": {
        "entrypoints": {
          "items": {
            "$ref": "#/$defs/UserFlowEntryPointConfig"
          },
          "title": "Entrypoints",
          "type": "array"
        },
        "blocks": {
          "items": {
            "$ref": "#/$defs/UserFlowBlockConfig"
          },
          "title": "Blocks",
          "type": "array"
        },
        "node_display_coords": {
          "additionalProperties": {
            "$ref": "#/$defs/UserFlowNodePosition"
          },
          "title": "Node Display Coords",
          "type": "object"
        }
      },
      "required": [
        "entrypoints",
        "blocks",
        "node_display_coords"
      ],
      "title": "UserFlowConfig",
      "type": "object"
    },
    "UserFlowEntryPointConfig": {
      "properties": {
        "command": {
          "anyOf": [
            {
              "$ref": "#/$defs/CommandEntryPoint"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "catch_all": {
          "anyOf": [
            {
              "$ref": "#/$defs/CatchAllEntryPoint"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "regex": {
          "anyOf": [
            {
              "$ref": "#/$defs/RegexMatchEntryPoint"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        }
      },
      "required": [
        "command",
        "catch_all",
        "regex"
      ],
      "title": "UserFlowEntryPointConfig",
      "type": "object"
    },
    "UserFlowNodePosition": {
      "properties": {
        "x": {
          "title": "X",
          "type": "number"
        },
        "y": {
          "title": "Y",
          "type": "number"
        }
      },
      "required": [
        "x",
        "y"
      ],
      "title": "UserFlowNodePosition",
      "type": "object"
    }
  },
  "properties": {
    "display_name": {
      "title": "Display Name",
      "type": "string"
    },
    "token_secret_name": {
      "title": "Token Secret Name",
      "type": "string"
    },
    "user_flow_config": {
      "anyOf": [
        {
          "$ref": "#/$defs/UserFlowConfig"
        },
        {
          "type": "null"
        }
      ],
      "default": null
    }
  },
  "required": [
    "display_name",
    "token_secret_name",
    "user_flow_config"
  ],
  "title": "BotConfig",
  "type": "object"
}