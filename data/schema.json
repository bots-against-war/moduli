{
  "$defs": {
    "CommandEntryPoint": {
      "properties": {
        "entrypoint_id": {
          "title": "Entrypoint Id",
          "type": "string"
        },
        "command": {
          "title": "Command",
          "type": "string"
        },
        "next_block_id": {
          "title": "Next Block Id",
          "type": "string"
        }
      },
      "required": [
        "entrypoint_id",
        "command",
        "next_block_id"
      ],
      "title": "CommandEntryPoint",
      "type": "object"
    },
    "FeedbackHandlerConfig": {
      "properties": {
        "admin_chat_id": {
          "title": "Admin Chat Id",
          "type": "integer"
        },
        "message_log_to_admin_chat": {
          "default": true,
          "title": "Message Log To Admin Chat",
          "type": "boolean"
        },
        "force_category_selection": {
          "default": false,
          "title": "Force Category Selection",
          "type": "boolean"
        },
        "hashtags_in_admin_chat": {
          "default": true,
          "title": "Hashtags In Admin Chat",
          "type": "boolean"
        },
        "hashtag_message_rarer_than": {
          "default": "PT300S",
          "format": "duration",
          "title": "Hashtag Message Rarer Than",
          "type": "string"
        }
      },
      "required": [
        "admin_chat_id",
        "message_log_to_admin_chat",
        "force_category_selection",
        "hashtags_in_admin_chat",
        "hashtag_message_rarer_than"
      ],
      "title": "FeedbackHandlerConfig",
      "type": "object"
    },
    "MessageBlock": {
      "description": "Simplest user flow block: send message and immediately continue to the next block",
      "properties": {
        "block_id": {
          "title": "Block Id",
          "type": "string"
        },
        "message_text": {
          "title": "Message Text",
          "type": "string"
        },
        "next_block_id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "title": "Next Block Id"
        }
      },
      "required": [
        "block_id",
        "message_text",
        "next_block_id"
      ],
      "title": "MessageBlock",
      "type": "object"
    },
    "UserFlowBlockConfig": {
      "properties": {
        "message": {
          "anyOf": [
            {
              "$ref": "#/$defs/MessageBlock"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "message"
      ],
      "title": "UserFlowBlockConfig",
      "type": "object"
    },
    "UserFlowConfig": {
      "properties": {
        "entrypoints": {
          "items": {
            "$ref": "#/$defs/UserFlowEntryPointConfig"
          },
          "title": "Entrypoints",
          "type": "array"
        },
        "blocks": {
          "items": {
            "$ref": "#/$defs/UserFlowBlockConfig"
          },
          "title": "Blocks",
          "type": "array"
        },
        "node_display_coords": {
          "additionalProperties": {
            "$ref": "#/$defs/UserFlowNodePosition"
          },
          "title": "Node Display Coords",
          "type": "object"
        }
      },
      "required": [
        "entrypoints",
        "blocks",
        "node_display_coords"
      ],
      "title": "UserFlowConfig",
      "type": "object"
    },
    "UserFlowEntryPointConfig": {
      "properties": {
        "command": {
          "anyOf": [
            {
              "$ref": "#/$defs/CommandEntryPoint"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "command"
      ],
      "title": "UserFlowEntryPointConfig",
      "type": "object"
    },
    "UserFlowNodePosition": {
      "properties": {
        "x": {
          "title": "X",
          "type": "number"
        },
        "y": {
          "title": "Y",
          "type": "number"
        }
      },
      "required": [
        "x",
        "y"
      ],
      "title": "UserFlowNodePosition",
      "type": "object"
    }
  },
  "properties": {
    "token_secret_name": {
      "title": "Token Secret Name",
      "type": "string"
    },
    "feedback_handler_config": {
      "anyOf": [
        {
          "$ref": "#/$defs/FeedbackHandlerConfig"
        },
        {
          "type": "null"
        }
      ],
      "default": null
    },
    "user_flow_config": {
      "anyOf": [
        {
          "$ref": "#/$defs/UserFlowConfig"
        },
        {
          "type": "null"
        }
      ],
      "default": null
    }
  },
  "required": [
    "token_secret_name",
    "feedback_handler_config",
    "user_flow_config"
  ],
  "title": "BotConfig",
  "type": "object"
}